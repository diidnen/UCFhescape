# @package _global_

defaults:
  - launcher: local
  - model: default
  - training: default
  - paths: windows
  - datamodule: lung_healthy
  - _self_
  - override paths/anatomy: lung_healthy

############ Job specific configurations ############

name: hescape_default_training

model:
  litmodule:
    img_enc_name: uni
    img_finetune: true
    img_proj: mlp
    gene_enc_name: nicheformer
    gene_finetune: false
    gene_proj: linear # mlp
    loss: CLIP
    temperature: 0.07

datamodule:
  seed: 24442
  batch_size: 64
  num_workers: 4
  pin_memory: true
  persistent_workers: true
  data_gene_reference_path: "C:/Users/ioone/PycharmProjects/moemodified/hescape/data/human-lung-healthy-panel/nicheformer_reference.h5ad"
  nicheformer_reference_path: "C:/Users/ioone/PycharmProjects/moemodified/pretrain_weights/gene/nicheformer/model.h5ad"
  technology_mean_path: "C:/Users/ioone/PycharmProjects/moemodified/xenium_mean_script.npy"


training:
  lightning:
    trainer:
      max_steps: 20000
      devices: 1          # 直接写 1
      num_nodes: 1
      accelerator: gpu    # 保持 gpu
      strategy: auto      # 或者直接删掉 strategy 字段
  train: true
  test:
    false
    # profiler: simple

  logger:
    wandb:
      project: hescape_training
